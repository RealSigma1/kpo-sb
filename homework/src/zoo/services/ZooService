package com.zoo.services;

import com.zoo.entities.*;
import com.zoo.interfaces.IInventory;

import java.util.ArrayList;
import java.util.List;

public class ZooService {
    private List<Animal> animals = new ArrayList<>();
    private List<Thing> things = new ArrayList<>();
    private VeterinaryClinic veterinaryClinic;

    public ZooService(VeterinaryClinic veterinaryClinic) {
        this.veterinaryClinic = veterinaryClinic;
    }

    public boolean addAnimal(Animal animal) {
        if (veterinaryClinic.checkHealth(animal)) {
            animals.add(animal);
            return true;
        }
        return false;
    }

    public void addThing(Thing thing) {
        things.add(thing);
    }

    public int calculateTotalFood() {
        int totalFood = 0;
        for (Animal animal : animals) {
            totalFood += animal.getFood();
        }
        return totalFood;
    }

    public List<Herbivore> getAnimalsForContactZoo() {
        List<Herbivore> contactZooAnimals = new ArrayList<>();
        for (Animal animal : animals) {
            if (animal instanceof Herbivore) {
                Herbivore herbivore = (Herbivore) animal;
                if (herbivore.canBeInContactZoo()) {
                    contactZooAnimals.add(herbivore);
                }
            }
        }
        return contactZooAnimals;
    }

    public List<IInventory> getAllInventory() {
        List<IInventory> inventory = new ArrayList<>();
        inventory.addAll(animals);
        inventory.addAll(things);
        return inventory;
    }

    public void printReport() {
        System.out.println("=== ZOO REPORT ===");
        System.out.println("Total animals: " + animals.size());
        System.out.println("Total food required: " + calculateTotalFood() + " kg/day");

        System.out.println("\nAnimals for contact zoo:");
        for (Herbivore animal : getAnimalsForContactZoo()) {
            System.out.println("- " + animal.getName() + " (Kindness: " + animal.getKindnessLevel() + ")");
        }

        System.out.println("\nInventory items:");
        for (IInventory item : getAllInventory()) {
            System.out.println("- " + item.getInventoryInfo());
        }
    }
}